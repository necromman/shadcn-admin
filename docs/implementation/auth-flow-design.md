# 회원가입/로그인 플로우 설계 문서

## 📋 개요
BRAND 디자인 시스템의 회원가입 및 로그인 플로우 구현을 위한 설계 문서입니다.
범용적으로 사용 가능한 인증 시스템 UI/UX를 구축하여 다양한 프로젝트에 적용할 수 있도록 설계합니다.

## 🎯 목표
- 단계별 회원가입 프로세스로 사용자 부담 최소화
- 다양한 인증 방식을 선택 가능한 유연한 구조
- 모바일 우선 반응형 디자인
- 데모용 플로우 구현 (실제 인증 연동 불필요)

## 🏗️ BRAND 회원가입 플로우 설계

### 전체 프로세스 (5단계)
```
[시작] → [약관 동의] → [회원 유형 선택] → [본인 인증] → [정보 입력] → [가입 완료]
```

### 상세 플로우

#### 1단계: 시작 페이지
- **BRAND 로고 및 환영 메시지**
- **회원가입 혜택 카드** (3개)
  - 🎁 가입 혜택
  - 🚀 빠른 서비스
  - 🔒 안전한 보안
- **CTA 버튼**: "회원가입 시작하기"
- **하단 링크**: "이미 회원이신가요? 로그인"

#### 2단계: 약관 동의
- **진행 바**: Step 1 of 5
- **전체 동의** 체크박스
- **필수 약관**
  - ✅ BRAND 이용약관 동의 (필수)
  - ✅ 개인정보 수집 및 이용 동의 (필수)
  - ✅ 만 14세 이상입니다 (필수)
- **선택 약관**
  - ☐ 마케팅 정보 수신 동의 (선택)
  - ☐ 광고성 정보 수신 동의 (선택)
- **버튼**: [이전] [다음]

#### 3단계: 회원 유형 선택
- **진행 바**: Step 2 of 5
- **선택 카드** (2개)
  - 👤 **개인 회원**
    - "개인 사용자를 위한 서비스"
    - "간편한 본인 인증"
  - 🏢 **법인 회원** (비활성화 - Phase 2)
    - "기업/단체를 위한 서비스"
    - "사업자 인증 필요"
- **버튼**: [이전] [다음]

#### 4단계: 본인 인증 방식 선택 (개인)
- **진행 바**: Step 3 of 5
- **인증 방식 선택** (카드 UI)
  
  📱 **모바일 신분증**
  - "스마트폰에 저장된 신분증"
  - "가장 빠르고 간편한 인증"
  
  💬 **간편인증**
  - 네이버
  - 카카오
  - 토스
  - 페이코
  - KB국민
  - 신한
  - "익숙한 서비스로 간편하게"
  
  🔐 **공동인증서**
  - "구 공인인증서"
  - "PC나 USB에 저장된 인증서"
  
  🏦 **금융인증서**
  - "클라우드 기반 인증서"
  - "은행 앱에서 바로 사용"

- **선택한 인증 방식별 상세 화면**
  
  **모바일 신분증 선택 시:**
  - QR코드 표시
  - "모바일 신분증 앱에서 QR을 스캔하세요"
  - [QR 새로고침] 버튼
  - 하단 안내: "모바일 신분증이 없으신가요?"
  
  **간편인증 선택 시:**
  - 서비스 로고 그리드 (2x3)
  - 선택한 서비스로 리다이렉트
  - "선택한 서비스에서 본인인증을 진행합니다"
  
  **공동인증서 선택 시:**
  - [인증서 선택] 버튼
  - 인증서 비밀번호 입력
  - "인증서가 저장된 위치를 선택하세요"
  
  **금융인증서 선택 시:**
  - 금융기관 선택 드롭다운
  - ID 입력
  - [인증하기] 버튼
  - "선택한 금융기관 앱에서 인증을 완료하세요"

- **버튼**: [이전] [인증 완료]

#### 5단계: 정보 입력
- **진행 바**: Step 4 of 5
- **기본 정보** (본인인증 정보 자동 입력)
  - 이름 (읽기 전용)
  - 생년월일 (읽기 전용)
  - 휴대폰 번호 (읽기 전용)
- **계정 정보**
  - 아이디 입력 + [중복 확인]
  - 비밀번호 입력 (강도 표시)
  - 비밀번호 확인
- **추가 정보** (선택)
  - 이메일
  - 닉네임
- **버튼**: [이전] [가입하기]

#### 6단계: 가입 완료
- **진행 바**: Step 5 of 5 ✅
- **축하 애니메이션** 🎉
- **환영 메시지**
  - "BRAND 회원이 되신 것을 환영합니다!"
  - "아이디: user123"
- **다음 단계 안내 카드**
  - 프로필 설정하기
  - 서비스 둘러보기
  - 첫 프로젝트 시작하기
- **버튼**: [로그인하기] [메인으로]

### 로그인 페이지
- **로그인 방식 탭**
  - ID/PW 로그인
  - 간편 로그인
  - 인증서 로그인
- **ID/PW 탭**
  - 아이디 입력
  - 비밀번호 입력
  - ☐ 로그인 상태 유지
  - [로그인] 버튼
- **간편 로그인 탭**
  - 카카오/네이버/토스 버튼
- **하단 링크**
  - 아이디 찾기 | 비밀번호 재설정 | 회원가입

## 📊 벤치마킹 인사이트

#### 개인 사용자 인증 방식
1. **모바일 신분증**
   - 스마트폰의 모바일 신분증으로 로그인
   - 가장 간편한 인증 방식
   - 모바일 앱 연동 필요

2. **간편인증**
   - 네이버, 카카오, 금융기관 등의 전자서명 활용
   - 사용자 친화적이며 접근성 높음
   - 별도 인증서 설치 불필요

3. **공동인증서**
   - 개인 컴퓨터, USB 등에 보관된 인증서
   - 기존 공인인증서 체계
   - 높은 보안성

4. **금융인증서**
   - 은행 앱/인터넷뱅킹에서 발급한 금융결제원 인증서
   - 클라우드 기반 인증서
   - 편의성과 보안성 균형

5. **민간 ID**
   - 네이버, 카카오, 페이코 ID로 로그인
   - 소셜 로그인 방식
   - 가장 빠른 로그인 방법

6. **비회원 로그인**
   - 회원가입 없이 성명과 주민등록번호로 로그인
   - 일회성 서비스 이용
   - 간단한 민원 처리용

#### 법인 사용자 인증 방식
1. **공동인증서**
   - 법인용 공동인증서 필수
   - 기업/단체 인증의 표준

2. **금융인증서**
   - 법인용 금융인증서 사용
   - 은행에서 발급 및 관리

3. **비회원 로그인 (법인)**
   - 법인등록번호 및 사업자번호로 로그인
   - 회원가입 없이 일회성 이용
   - 간단한 법인 민원 처리

#### 정부 통합인증(Any-ID) 특징
- **통합 인증 플랫폼**: 정부 서비스 전체에서 하나의 ID로 이용
- **다양한 인증 수단 지원**: 사용자가 편한 방식 선택 가능
- **법인 사업자 검증**: 국세청 연동으로 사업자 정보 실시간 확인
- **보안 강화**: reCAPTCHA 적용, 자동 로그아웃 기능

### 주요 인사이트
1. **다양한 인증 옵션 제공**: 사용자 상황에 맞는 인증 방법 선택 가능
2. **법인/개인 명확한 구분**: 별도 인증 프로세스 제공
3. **비회원 서비스 지원**: 회원가입 없이도 기본 서비스 이용 가능
4. **통합 인증 체계**: 하나의 ID로 여러 서비스 이용
5. **모바일 우선**: 모바일 신분증, 앱 인증 등 모바일 친화적 옵션

## 🏗️ 구현 계획

### 라우팅 구조
```
/auth
├── /login                    # 로그인 페이지
├── /signup                   # 회원가입 시작
├── /signup/terms             # 약관 동의
├── /signup/user-type         # 회원 유형 선택
├── /signup/verify-method     # 인증 방식 선택
├── /signup/verify            # 본인 인증 진행
├── /signup/info              # 정보 입력
├── /signup/complete          # 가입 완료
├── /find-id                  # 아이디 찾기
└── /reset-password           # 비밀번호 재설정
```

### 컴포넌트 구조
```
src/features/auth/
├── components/
│   ├── login/
│   │   ├── login-form.tsx           # ID/PW 로그인 폼
│   │   ├── social-login.tsx         # 간편 로그인
│   │   └── cert-login.tsx           # 인증서 로그인
│   ├── signup/
│   │   ├── signup-steps.tsx         # 스텝 인디케이터
│   │   ├── terms-agreement.tsx      # 약관 동의
│   │   ├── user-type-select.tsx     # 회원 유형 선택
│   │   ├── verify-method.tsx        # 인증 방식 선택
│   │   ├── mobile-id-verify.tsx     # 모바일 신분증 인증
│   │   ├── simple-verify.tsx        # 간편인증
│   │   ├── cert-verify.tsx          # 공동인증서
│   │   ├── finance-verify.tsx       # 금융인증서
│   │   ├── user-info-form.tsx       # 정보 입력
│   │   └── signup-complete.tsx      # 가입 완료
│   └── common/
│       ├── auth-layout.tsx          # 인증 레이아웃
│       └── auth-header.tsx          # 인증 헤더
├── hooks/
│   ├── use-auth.ts                  # 인증 관련 훅
│   ├── use-verification.ts          # 인증번호 관련 훅
│   └── use-signup-flow.ts           # 회원가입 플로우 관리
├── types/
│   └── auth.types.ts                # 인증 관련 타입
└── utils/
    ├── validation.ts                 # 유효성 검사
    └── mock-auth.ts                  # 데모용 모의 인증
```

## 🎨 UI/UX 상세 설계

### 공통 디자인 원칙
- **색상**: BRAND 테마 컬러 사용
- **반응형**: 모바일 퍼스트 디자인
- **애니메이션**: 부드러운 화면 전환
- **접근성**: WCAG 2.1 AA 준수

### 화면별 상세 스펙

#### 📱 모바일 레이아웃
- 단일 컬럼 구조
- 풀 너비 입력 필드
- 하단 고정 버튼
- 스텝 인디케이터 상단 고정

#### 💻 데스크톱 레이아웃
- 중앙 정렬 카드 (max-width: 480px)
- 좌측 일러스트레이션
- 우측 폼 영역
- 플로팅 스텝 인디케이터

## 🔧 기술 스택
- **프레임워크**: React + TypeScript
- **라우팅**: React Router
- **상태관리**: Zustand
- **폼 관리**: React Hook Form + Zod
- **UI**: shadcn/ui
- **애니메이션**: Framer Motion
- **인증**: JWT + Refresh Token

## 📱 반응형 설계
- **모바일**: 단일 컬럼, 풀 너비 입력
- **태블릿**: 중앙 정렬, 최대 너비 제한
- **데스크톱**: 카드 레이아웃, 사이드 일러스트

## 🔒 보안 고려사항
- HTTPS 필수
- 비밀번호 강도 검증
- Rate limiting (인증 시도)
- CSRF 토큰
- XSS 방지

## ♿ 접근성
- 시맨틱 HTML
- ARIA 레이블
- 키보드 네비게이션
- 포커스 관리
- 에러 메시지 명확히 표시

## 📊 성공 지표
- 회원가입 전환율 > 60%
- 평균 가입 소요 시간 < 3분
- 이탈률 < 20%
- 모바일 가입 비율 > 50%

## 💡 구현 특징

### 데모 모드 기능
- **모의 인증**: 실제 API 연동 없이 플로우 체험
- **샘플 데이터**: 테스트용 더미 데이터 자동 입력
- **시뮬레이션**: 
  - 모바일 신분증: QR코드 표시 → 3초 후 자동 인증
  - 간편인증: 서비스 선택 → 모의 로그인 화면 → 자동 성공
  - 공동인증서: 인증서 선택 → 비밀번호 입력 → 인증 완료
  - 금융인증서: 금융기관 선택 → ID 입력 → 인증 완료
- **성공 시나리오**: 모든 인증이 성공하도록 설정

### 상태 관리
```typescript
// 회원가입 플로우 상태
interface SignupState {
  currentStep: number;
  userType: 'personal' | 'business';
  verifyMethod: 'mobile-id' | 'simple' | 'cert' | 'finance';
  termsAgreed: boolean[];
  personalInfo: {
    name: string;
    birthdate: string;
    phone: string;
  };
  accountInfo: {
    username: string;
    password: string;
    email?: string;
  };
}

// 인증 방식별 타입
type VerifyMethod = {
  'mobile-id': '모바일 신분증';
  'simple': '간편인증';
  'cert': '공동인증서';
  'finance': '금융인증서';
}
```

## 🚀 구현 우선순위

### Phase 1: 핵심 플로우 (현재)
- ✅ 설계 문서 작성
- ⬜ 사이드바 Frontend 카테고리 추가
- ⬜ 라우팅 설정
- ⬜ 회원가입 5단계 플로우
- ⬜ 로그인 페이지 (3가지 방식)
- ⬜ 데모 모드 구현

### Phase 2: 추가 기능
- ⬜ 법인 회원 플로우
- ⬜ 아이디/비밀번호 찾기
- ⬜ 실제 validation 로직
- ⬜ 애니메이션 효과 강화

### Phase 3: 고도화
- ⬜ 실제 API 연동 옵션
- ⬜ 다국어 지원
- ⬜ A/B 테스트 지원

## 🎯 즉시 실행 계획
1. **사이드바 메뉴 추가**
   - Frontend 카테고리 생성
   - 인증 관련 메뉴 항목 추가

2. **라우팅 구성**
   - /auth/* 라우트 설정
   - 페이지 컴포넌트 생성

3. **회원가입 플로우 구현**
   - Step 1: 시작 페이지
   - Step 2: 약관 동의
   - Step 3: 회원 유형 선택
   - Step 4: 인증 방식 선택 및 진행
   - Step 5: 정보 입력
   - Step 6: 완료

4. **로그인 페이지 구현**
   - 탭 방식 UI
   - 3가지 로그인 옵션

5. **데모 모드 완성**
   - 모의 인증 프로세스
   - 성공 시나리오 구현

## 📝 구현 진행 상태
> 다음 세션에서 이어서 진행할 내용

### ✅ 완료된 작업
- [x] 회원가입/로그인 플로우 설계
- [x] 본인인증 방식 4가지 정의 (모바일 신분증, 간편인증, 공동인증서, 금융인증서)
- [x] 컴포넌트 구조 설계
- [x] 라우팅 구조 설계
- [x] 데모 모드 시나리오 정의

### 📌 다음 세션 작업 목록
1. **사이드바 구현**
   - `src/components/layout/sidebar.tsx` 수정
   - Frontend 메뉴 카테고리 추가
   - 인증 관련 메뉴 항목 (로그인, 회원가입) 추가

2. **라우트 설정**
   - `src/routes/` 폴더에 auth 관련 라우트 파일 생성
   - React Router 설정

3. **기본 레이아웃 구현**
   - `src/features/auth/components/common/auth-layout.tsx`
   - `src/features/auth/components/common/auth-header.tsx`

4. **회원가입 플로우 페이지 구현 순서**
   - `/auth/signup` - 시작 페이지
   - `/auth/signup/terms` - 약관 동의
   - `/auth/signup/user-type` - 회원 유형 선택
   - `/auth/signup/verify-method` - 인증 방식 선택
   - `/auth/signup/verify` - 본인 인증 진행
   - `/auth/signup/info` - 정보 입력
   - `/auth/signup/complete` - 가입 완료

5. **로그인 페이지 구현**
   - `/auth/login` - 통합 로그인 페이지

### 💾 주요 파일 경로
```
프로젝트 루트: D:\PROJECT\practice\shadcn-admin

작업 대상:
- src/components/layout/sidebar.tsx (사이드바)
- src/routes/ (라우팅)
- src/features/auth/ (인증 기능)

참조 문서:
- docs/implementation/auth-flow-design.md (이 문서)
- CLAUDE.md (프로젝트 지침)
```

### 🔑 핵심 구현 포인트
1. **BRAND로 모든 텍스트 통일**
2. **데모 모드 - 실제 API 연동 없음**
3. **shadcn/ui 컴포넌트 사용 필수**
4. **모바일 우선 반응형 디자인**
5. **디자인 시스템 퀄리티 유지**

### 📌 세션 시작 체크리스트
다음 세션 시작 시:
1. 이 문서 (`docs/implementation/auth-flow-design.md`) 먼저 읽기
2. 작업 진행 상태 확인
3. 사이드바 메뉴 추가부터 시작
4. 순차적으로 구현 진행